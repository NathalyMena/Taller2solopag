{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,+DAaA,MAAMC,EAAMF,EAAAG,cAAcC,EAAAC,SACpBC,EAAOC,EAAAC,UACPC,EAAKC,EAAAC,aAAaT,GAGlBU,EAAiBC,SAASC,eAAe,kBAC/CF,EAAeG,iBAAiB,UAAUC,MAAOC,IAC/CA,EAAEC,iBAEF,MAIMC,EAAU,MAJHP,EAAeQ,KAAKC,YACnBT,EAAeU,MAAMD,eAClBT,EAAeW,SAASF,MAMvCG,SAAS,GAILC,QAiBRT,eAA0BU,GAnD1BJ,MAmDkCA,EAnDlCC,SAmDyCA,IAEvC,IACE,MAtDJI,KAsDYA,SAAcpB,EAAAqB,+BAA+BF,EAAMJ,EAAOC,GAClE,OAAOI,EAGP,MAAOV,GAEQ,uBAAXA,EAAEY,MACJC,MAAM,kDAEO,8BAAXb,EAAEY,MACJC,MAAM,2CA9BgBC,CAAWzB,EAAMa,SAoC7CH,eAAiCgB,EAAIC,EAAQC,GAC3C,UAEQxB,EAAAyB,OAAOzB,EAAA0B,IAAIJ,EAAI,QAASC,GAASC,GAEvC,MAAOjB,GACPoB,QAAQC,IAAIrB,IAxCRsB,CAAkB9B,EAAIgB,EAAYe,IAAKrB,GAE7CW,MAAM,2BAGJW,SAASC,KADPjB,EACc,mBAGA","sources":["app.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport {  setDoc, doc } from \"firebase/firestore\"; \r\n\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nimport firebaseConfig from \"./src/utils/firebase\";\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth();\r\nconst db = getFirestore(app);\r\n\r\n\r\nconst createUserForm = document.getElementById(\"createUserForm\");\r\ncreateUserForm.addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  const name = createUserForm.name.value;\r\n  const email = createUserForm.email.value;\r\n  const password = createUserForm.password.value;\r\n\r\n  const newUser = {\r\n    name,\r\n    email,\r\n    password,\r\n    isAdmin: false,\r\n  }\r\n\r\n \r\n  const userCreated = await createUser(auth, newUser);\r\n \r\n  await addUserToDatabase(db, userCreated.uid, newUser);\r\n\r\n  alert(`Econet de la bienvenida`)\r\n\r\n  if (userCreated) {\r\n    location.href = \"./shopLogin.html\";\r\n\r\n}else {\r\n    location.href = \"#\";\r\n}\r\n\r\n});\r\n\r\n\r\n\r\nasync function createUser(auth, { email, password }) {\r\n\r\n  try {\r\n    const  {user} = await createUserWithEmailAndPassword(auth, email, password);\r\n    return user;\r\n    \r\n\r\n  } catch (e) {\r\n\r\n    if (e.code === \"auth/weak-password\") {\r\n      alert(\"Tu contrase√±a debe tener al menos 6 caracteres\");\r\n    }\r\n    if (e.code === \"auth/email-already-in-use\") {\r\n      alert(\"Este correo ya se encuentra registrado\");\r\n    }\r\n\r\n  }\r\n}\r\n\r\nasync function addUserToDatabase(db, userId, userInfo) {\r\n  try {\r\n\r\n    await setDoc(doc(db, \"users\", userId), userInfo);\r\n\r\n  } catch (e) {\r\n    console.log(e);\r\n\r\n  }\r\n}\r\n\r\n"],"names":["$fXOuZ","parcelRequire","$6b17f08f738443dc$var$app","initializeApp","$fAZ67","default","$6b17f08f738443dc$var$auth","$1tHc5","getAuth","$6b17f08f738443dc$var$db","$etBjH","getFirestore","$6b17f08f738443dc$var$createUserForm","document","getElementById","addEventListener","async","e","preventDefault","newUser","name","value","email","password","isAdmin","userCreated","auth","user","createUserWithEmailAndPassword","code","alert","$6b17f08f738443dc$var$createUser","db","userId","userInfo","setDoc","doc","console","log","$6b17f08f738443dc$var$addUserToDatabase","uid","location","href"],"version":3,"file":"register.a81c4f98.js.map"}