{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,oDDMA,MAAME,EAAqBC,SAASC,eAAe,eAC7CC,EAAuBF,SAASC,eAAe,iBAErD,IAAIE,EACAC,EAAO,GAWXC,eAAeC,IACX,MAAMC,EAVV,SAAkBC,GAEd,MAAMC,EAAMC,OAAOC,SAASC,OAG5B,OAFqB,IAAIC,gBAAgBJ,GACVK,IAAIN,GAMjBO,CAAS,OAgB/B,SAAuBC,GAEnBd,EAAqBe,UAAY,yCAAyCD,EAAQE,OAAO,OAEzF,MAEMC,EAFuBf,EAAKgB,MAAMC,GAAgBA,EAAYC,KAAON,EAAQM,KAGnF,mEAAkE,2DAIjEvB,EAAkBkB,UACf,8BAA8BD,EAAQO,oDACPP,EAAQQ,2aE1CvBC,EFgDuDT,EAAQS,ME/C5E,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,oBF6CRN,IElDN,IAAwBM,EFoDpB,MAAMO,EAAoBhC,SAASiC,cAAc,kBACjDD,EAAkBE,iBAAiB,SAASC,IACxC/B,EAAKgC,KAAKpB,GE/DlBX,eAAgCgC,GAC5BC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUJ,IFgExCK,CAAiBtC,GAEbD,GACAwC,EAAAC,mBAAmB9C,EAAA+C,GAAI1C,EAAW2C,IAAK1C,GAG3C4B,EAAkBe,aAAa,YAAY,GAC3Cf,EAAkBgB,UAAY,sBAtClCC,CAPgB,UCxBpB5C,eAA0BiB,GAEtB,MAAM4B,EAASC,EAAAC,IAAItD,EAAA+C,GAAI,WAAYvB,GAEnC,IAQI,aAJsB6B,EAAAE,OAAOH,IACRI,OAKxB,MAAMnB,GACHoB,QAAQC,IAAIrB,IDMGsB,CAAWlD,GAK1Be,GAAIf,IAiDZX,EAAA8D,mBAAmB5D,EAAA6D,MAAMtD,MAAOuD,IACxBA,GAGAzD,EAAayD,EACbxD,QAAauC,EAAAkB,gBAAgB/D,EAAA+C,GAAI1C,EAAW2C,KAC5CS,QAAQC,IAAIpD,IAGZA,EEnFR,WACI,MAAM0D,EAASxB,aAAayB,QAAQ,QACpC,OAAOD,EAAStB,KAAKwB,MAAMF,GAAU,GFiF1BG,GAKX3D","sources":["src/scripts/product.js","src/scripts/functions/getProduct.js","src/utils/index.js"],"sourcesContent":["import { onAuthStateChanged } from \"firebase/auth\";\nimport { getProduct } from \"./functions/getProduct\";\nimport { auth, db } from \"./apps\";\nimport { getMyLocalCart, addProductToCart, currencyFormat } from \"../utils\";\nimport { getFirebaseCart, createFirebaseCart } from \"./functions/functionCart\";\n\nconst productInfoSection = document.getElementById(\"productInfo\");\nconst productAssetsSection = document.getElementById(\"productAssets\");\n\nlet userLogged = undefined;\nlet cart = [];\n\nfunction getParam(param) {\n\n    const url = window.location.search;\n    const searchParams = new URLSearchParams(url);\n    const productId = searchParams.get(param);\n    return productId;\n\n}\n\nasync function loadProduct() {\n    const productId = getParam(\"id\");\n\n    const data = await getProduct(productId);\n\n    \n    const product = {\n        ...data,\n        id: productId,\n\n\n    }\n\n    renderProduct(product);\n\n}\n\nfunction renderProduct(product) {\n\n    productAssetsSection.innerHTML = `<img class=\"product__mainImage\" src= \"${product.images[0]}\">`;\n\n    const isProductAddedToCart = cart.some((productCart) => productCart.id === product.id);\n\n    const productButtonCart = isProductAddedToCart ?\n    '<button class=\"product__cart\" disabled>Producto añadido</button>' :\n    '<button class=\"product__cart\">Añadir al carrito</button>';\n\n\n    productInfoSection.innerHTML =\n        `<h1 class=\"product__name\"> ${product.name} </h1>\n    <p class=\"product__description\"> ${product.description} <br>  <br> Cuando adquieres un de nuestros productos ecológicos, estás apoyando nuestras iniciativas \n    para proteger nuestro entorno. El 50% de esta venta, será invertido directamente \n    para fines de protección de especies en via de extinción </p>\n    <div class=\"price__modif\"> \n    <div class=\"price__title\">\n     </h1> <h2>Total</h2> \n    <p>Envío incluido</p> </div>  <h1 class=\"product__price\"> ${currencyFormat(product.price)}</div> \n\n    ${productButtonCart}`;\n    \n    const productCartButton = document.querySelector(\".product__cart\");\n    productCartButton.addEventListener(\"click\", e => {\n        cart.push(product);\n\n        addProductToCart(cart);\n\n        if (userLogged) {\n            createFirebaseCart(db, userLogged.uid, cart);\n        }\n\n        productCartButton.setAttribute(\"disabled\", true);\n        productCartButton.innerText = \"Producto añadido\";\n    });\n}\n    \n\n\nonAuthStateChanged(auth, async (user) => {\n    if (user) {\n        // User is signed in, see docs for a list of available properties\n        // https://firebase.google.com/docs/reference/js/firebase.User\n        userLogged = user;\n        cart = await getFirebaseCart(db, userLogged.uid);\n        console.log(cart);\n        // ...\n    } else {\n        cart = getMyLocalCart();\n        // User is signed out\n        // ...\n    }\n\n    loadProduct();\n\n});","import { db } from \"../apps\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\nasync function getProduct(id) {\n\n    const docRef = doc(db, \"products\", id);\n\n    try {\n\n\n        \n        const docSnap = await getDoc(docRef);\n        const data = docSnap.data();\n\n\n        return data;\n\n    }catch(e){\n        console.log(e);\n    }\n}\n\nexport {\n    getProduct\n}","async function addProductToCart(cart) {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n};\n\nfunction getMyLocalCart() {\n    const myCart = localStorage.getItem(\"cart\");\n    return myCart ? JSON.parse(myCart) : [];\n}\n\nfunction currencyFormat(price) {\n    return new Intl.NumberFormat(\"es-CO\", {\n        style: 'currency',\n        currency: 'COP',\n        minimumFractionDigits: 0\n    }).format(price);\n}\n\nexport {\n    addProductToCart,\n    getMyLocalCart,\n    currencyFormat\n}"],"names":["$1tHc5","parcelRequire","$lrymF","$63445bb05f51f6f7$var$productInfoSection","document","getElementById","$63445bb05f51f6f7$var$productAssetsSection","$63445bb05f51f6f7$var$userLogged","$63445bb05f51f6f7$var$cart","async","$63445bb05f51f6f7$var$loadProduct","productId","param","url","window","location","search","URLSearchParams","get","$63445bb05f51f6f7$var$getParam","product","innerHTML","images","productButtonCart","some","productCart","id","name","description","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","productCartButton","querySelector","addEventListener","e","push","cart","localStorage","setItem","JSON","stringify","$1eef38cfda4b0c52$export$1bdbccb25be1b1c","$bNIB4","createFirebaseCart","db","uid","setAttribute","innerText","$63445bb05f51f6f7$var$renderProduct","docRef","$etBjH","doc","getDoc","data","console","log","$96d763eed7c24a29$export$e2005c9600188ac7","onAuthStateChanged","auth","user","getFirebaseCart","myCart","getItem","parse","$1eef38cfda4b0c52$export$98118cea2602688f"],"version":3,"file":"product.dbf3116c.js.map"}