{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCCSA,SAASC,EAAeC,GACpB,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,GDRd,MAAMO,EAAcC,SAASC,eAAe,QACtCC,EAAeF,SAASC,eAAe,SAC7C,IACIE,EADAC,EAAO,GAGX,SAASC,EAASC,GACd,IAAIC,EAAQ,EACZD,EAAKE,SAAQC,KA0BjB,SAAuBA,GACnB,MAAMC,EAAcV,SAASW,cAAc,MAC3CD,EAAYE,UAAY,UACxBF,EAAYG,UAAY,2BAGZJ,EAAQK,OAAO,4FAC8BL,EAAQM,6CACpCxB,EAAekB,EAAQjB,4IAWpDO,EAAYiB,YAAYN,GAExBA,EAAYO,iBAAiB,SAASC,IACR,WAArBA,EAAEC,OAAOC,UACTC,QAAQC,IAAI,cAzCzBC,eAA6BC,GACzB,MAAMC,EAAUrB,EAAKsB,QAAOjB,GAAWA,EAAQkB,KAAOH,IAEtDpB,EAAOqB,EAEHtB,SACMyB,EAAAC,mBAAmBxC,EAAAyC,GAAI3B,EAAW4B,IAAKN,IC3BrDF,eAAgCjB,GAC5B0B,aAAaC,QAAQ,OAAQC,KAAKC,UAAU7B,KD6B5C8B,CAAiBX,GAEjB1B,EAAYc,UAAY,GAExBR,EAASoB,GA6BAY,CAAc5B,EAAQkB,QAjD3BW,CAAc7B,GACdF,GAASgC,SAAS9B,EAAQjB,UAG9BU,EAAasC,UAAYjD,EAAegB,GAkD5CkC,EAAAC,mBAAmBrD,EAAAsD,MAAMpB,MAAOqB,IACxBA,GAGFzC,EAAayC,EACbxC,QAAawB,EAAAiB,gBAAgBxD,EAAAyC,GAAI3B,EAAW4B,MAE1C3B,ECvER,WACI,MAAM0C,EAASd,aAAae,QAAQ,QACpC,OAAOD,EAASZ,KAAKc,MAAMF,GAAU,GDqE1BG,GAKX5C,EAASD","sources":["src/scripts/cart.js","src/utils/index.js"],"sourcesContent":["import { auth, db } from \"../scripts/apps\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { getFirebaseCart, createFirebaseCart } from \"./functions/functionCart.js\";\nimport { addProductToCart } from \"../utils\";\nimport { getMyLocalCart, currencyFormat } from \"../utils/index\";\n\nconst cartSection = document.getElementById(\"cart\");\nconst totalSection = document.getElementById(\"total\");\nlet cart = [];\nlet userLogged;\n\nfunction loadCart(cart) {\n    let total = 0;\n    cart.forEach(product => {\n        renderProduct(product);\n        total += parseInt(product.price);\n    });\n\n    totalSection.innerText = currencyFormat(total);\n};\n\nasync function removeProduct(productId) {\n    const newCart = cart.filter(product => product.id !== productId);\n    \n    cart = newCart;\n\n    if (userLogged ) {\n        await createFirebaseCart(db, userLogged.uid, newCart);\n    }\n\n    addProductToCart(newCart);\n\n    cartSection.innerHTML = \"\";\n\n    loadCart(newCart);\n\n}\n\n\nfunction renderProduct(product) {\n    const productCart = document.createElement(\"li\");\n    productCart.className = \"product\";\n    productCart.innerHTML = `\n\n    \n    <img src=\"${product.images[0]}\" class=\"product__image\"> \n    <div class =\"product__info\"> <h3 class=\"product__name\">${product.name}</h3>\n    <h3 class=\"product__price\">${currencyFormat(product.price)}</h3>\n    <div>  <button class=\"product__delete\">Eliminar producto</button> </div>\n     </div>\n     \n\n\n    \n    \n    \n    `;\n\n    cartSection.appendChild(productCart);\n\n    productCart.addEventListener(\"click\", e => {\n         if (e.target.tagName === \"BUTTON\") {\n             console.log(\"remove it!\");\n             removeProduct(product.id);\n         }\n    })\n};\n\nonAuthStateChanged(auth, async (user) => {\n    if (user) {\n      // User is signed in, see docs for a list of available properties\n      // https://firebase.google.com/docs/reference/js/firebase.User\n      userLogged = user;\n      cart = await getFirebaseCart(db, userLogged.uid);\n    } else {\n        cart = getMyLocalCart();\n      // User is signed out\n      // ...\n    }\n\n    loadCart(cart);\n\n  });\n\n","async function addProductToCart(cart) {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n};\n\nfunction getMyLocalCart() {\n    const myCart = localStorage.getItem(\"cart\");\n    return myCart ? JSON.parse(myCart) : [];\n}\n\nfunction currencyFormat(price) {\n    return new Intl.NumberFormat(\"es-CO\", {\n        style: 'currency',\n        currency: 'COP',\n        minimumFractionDigits: 0\n    }).format(price);\n}\n\nexport {\n    addProductToCart,\n    getMyLocalCart,\n    currencyFormat\n}"],"names":["$lrymF","parcelRequire","$1eef38cfda4b0c52$export$4670d0ed237a9270","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","$ff14a25859eedfe9$var$cartSection","document","getElementById","$ff14a25859eedfe9$var$totalSection","$ff14a25859eedfe9$var$userLogged","$ff14a25859eedfe9$var$cart","$ff14a25859eedfe9$var$loadCart","cart","total","forEach","product","productCart","createElement","className","innerHTML","images","name","appendChild","addEventListener","e","target","tagName","console","log","async","productId","newCart","filter","id","$bNIB4","createFirebaseCart","db","uid","localStorage","setItem","JSON","stringify","$1eef38cfda4b0c52$export$1bdbccb25be1b1c","$ff14a25859eedfe9$var$removeProduct","$ff14a25859eedfe9$var$renderProduct","parseInt","innerText","$1tHc5","onAuthStateChanged","auth","user","getFirebaseCart","myCart","getItem","parse","$1eef38cfda4b0c52$export$98118cea2602688f"],"version":3,"file":"cart.7b765a2a.js.map"}