{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAqBAE,eAAeC,EAAaC,EAASC,EAAS,IAO1C,OALuBA,EAAOC,KAAIJ,MAAOK,IACrC,MAAMC,QATdN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,mBAAmBG,EAAMK,QACzD,aAAaF,EAAAG,YAAYJ,EAAYF,GAOJO,CAAqBV,EAASG,GAC3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,cDtB9D,MAAMC,EAAoBC,SAASC,eAAe,qBAElDF,EAAkBG,iBAAiB,UAAUlB,MAAOmB,IAChDA,EAAEC,iBAEF,MAAMV,EAAOK,EAAkBL,KAAKW,MAC9BC,EAAcP,EAAkBO,YAAYD,MAC5CE,EAAQR,EAAkBQ,MAAMF,MAChCG,EAAWT,EAAkBS,SAASH,MACtClB,EAASY,EAAkBZ,OAAOsB,MAExC,IAAIC,EAAU,GAEd,GAAIvB,EAAOwB,OAAQ,CACf,MAAMC,QAAuB3B,EAAaJ,EAAAK,QAAS,IAAIC,IAEvDuB,QAAgBG,QAAQC,IAAIF,GAGhC,MAAMG,EAAa,MACfrB,cACAY,QACAC,WACAC,EACArB,OAAQuB,SCxBhB1B,eAA0BgC,EAAIC,GAC1B,UACUlC,EAAAmC,OAAOnC,EAAAoC,WAAWH,EAAI,YAAaC,GAE3C,MAAOd,GACLiB,QAAQC,IAAIlB,IDsBVmB,CAAWzC,EAAAmC,GAAID","sources":["src/scripts/createProduct.js","src/scripts/functions/addProduct.js"],"sourcesContent":["import { storage, db } from \"./apps\";\r\nimport { addProduct, uploadImages } from \"./functions/addProduct\";\r\n\r\nconst createProductForm = document.getElementById(\"createProductForm\");\r\n\r\ncreateProductForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const name = createProductForm.name.value;\r\n    const description = createProductForm.description.value;\r\n    const price = createProductForm.price.value;\r\n    const material = createProductForm.material.value;\r\n    const images = createProductForm.images.files;\r\n\r\n    let gallery = [];\r\nc\r\n    if (images.length) {\r\n        const uploadedImages = await uploadImages(storage, [...images]);\r\n        \r\n        gallery = await Promise.all(uploadedImages);\r\n    }\r\n\r\n    const newProduct = {\r\n        name,\r\n        description,\r\n        price,\r\n        material,\r\n        images: gallery,\r\n    };\r\n\r\n    await addProduct(db, newProduct);\r\n\r\n\r\n});","import { addDoc, collection } from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\n\r\nasync function addProduct(db, product) {\r\n    try {\r\n        await addDoc(collection(db, \"products\"), product);\r\n\r\n    } catch (e) {\r\n        console.log(e);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nasync function imageUploadReference(storage, image) {\r\n    const storageRef = ref(storage, `products/images/${image.name}`);\r\n    return await uploadBytes(storageRef, image);\r\n\r\n}\r\n\r\nasync function uploadImages(storage, images = []) {\r\n\r\n    const uploadedImages = images.map(async (image) => {\r\n        const imageReference = await imageUploadReference(storage, image);\r\n        return getDownloadURL(ref(storage, imageReference.ref.fullPath));\r\n    });\r\n\r\n    return uploadedImages;\r\n\r\n}\r\n\r\nexport {\r\n    addProduct, uploadImages\r\n}\r\n\r\n"],"names":["$lrymF","parcelRequire","$etBjH","async","$5ff810c2bfdb1b0e$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$5ff810c2bfdb1b0e$var$imageUploadReference","getDownloadURL","fullPath","$429397c78ea7114e$var$createProductForm","document","getElementById","addEventListener","e","preventDefault","value","description","price","material","files","gallery","length","uploadedImages","Promise","all","newProduct","db","product","addDoc","collection","console","log","$5ff810c2bfdb1b0e$export$7caf006d7b64ee15"],"version":3,"file":"createProduct.f7194ba8.js.map"}